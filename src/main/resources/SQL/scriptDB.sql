
-- Elimina datos en orden inverso a las dependencias
DELETE FROM AUDITORIA;
DELETE FROM NOTIFICACION;
DELETE FROM RESPUESTA_ESTUDIANTE;
DELETE FROM PRESENTACION_EXAMEN;
DELETE FROM EXAMEN_PREGUNTA;
DELETE FROM EXAMEN;
DELETE FROM OPCION_RESPUESTA;
DELETE FROM PREGUNTA;
DELETE FROM MATRICULA;
DELETE FROM JORNADA;
DELETE FROM GRUPO;
DELETE FROM TEMA;
DELETE FROM CONTENIDO;
DELETE FROM UNIDAD;
DELETE FROM PLAN_ESTUDIO;
DELETE FROM USUARIO;
DELETE FROM AULA;
DELETE FROM PERIODO_ACADEMICO;
DELETE FROM CURSO;
DELETE FROM PROGRAMA;
DELETE FROM FACULTAD;
DELETE FROM CATEGORIA_EXAMEN;
DELETE FROM NIVEL_DIFICULTAD;
DELETE FROM TIPO_PREGUNTA;
DELETE FROM TIPO_USUARIO;
DELETE FROM ESTADO_GENERAL;

-- Tablas básicas de configuración
CREATE TABLE TIPO_USUARIO (
    ID_TIPO_USUARIO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    DESCRIPCION VARCHAR2(200),
    ESTADO NUMBER(1) DEFAULT 1
);

CREATE TABLE TIPO_PREGUNTA (
    ID_TIPO_PREGUNTA NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    DESCRIPCION VARCHAR2(200),
    ESTADO NUMBER(1) DEFAULT 1
);

CREATE TABLE NIVEL_DIFICULTAD (
    ID_NIVEL_DIFICULTAD NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    DESCRIPCION VARCHAR2(200),
    ESTADO NUMBER(1) DEFAULT 1
);

CREATE TABLE ESTADO_GENERAL (
    ID_ESTADO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    DESCRIPCION VARCHAR2(200),
    TIPO_ENTIDAD VARCHAR2(50) NOT NULL,
    ESTADO NUMBER(1) DEFAULT 1
);

CREATE TABLE CATEGORIA_EXAMEN (
    ID_CATEGORIA NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    DESCRIPCION VARCHAR2(200),
    ESTADO NUMBER(1) DEFAULT 1
);

-- Tablas principales
CREATE TABLE FACULTAD (
    ID_FACULTAD NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    ID_ESTADO NUMBER
);

CREATE TABLE PROGRAMA (
    ID_PROGRAMA NUMBER PRIMARY KEY,
    ID_FACULTAD NUMBER,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    ID_ESTADO NUMBER
);

CREATE TABLE CURSO (
    ID_CURSO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    CREDITOS NUMBER(2),
    ID_ESTADO NUMBER,
    ID_PROGRAMA NUMBER
);

CREATE TABLE PERIODO_ACADEMICO (
    ID_PERIODO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    FECHA_INICIO DATE NOT NULL,
    FECHA_FIN DATE NOT NULL,
    ID_ESTADO NUMBER
);

CREATE TABLE AULA (
    ID_AULA NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    BLOQUE VARCHAR2(50) NOT NULL,
    CAPACIDAD NUMBER(3),
    ID_ESTADO NUMBER
);

CREATE TABLE USUARIO (
    ID_USUARIO NUMBER PRIMARY KEY,
    ID_TIPO_USUARIO NUMBER NOT NULL,
    NOMBRE VARCHAR2(100) NOT NULL,
    APELLIDO VARCHAR2(100) NOT NULL,
    EMAIL VARCHAR2(100) NOT NULL UNIQUE,
    CONTRASENA VARCHAR2(100) NOT NULL,
    ID_ESTADO NUMBER NOT NULL,
    FECHA_REGISTRO DATE DEFAULT SYSDATE,
    FECHA_ULTIMO_ACCESO TIMESTAMP,
    INTENTOS_FALLIDOS NUMBER(2) DEFAULT 0,
    FECHA_BLOQUEO TIMESTAMP,
    TELEFONO VARCHAR2(20),
    DIRECCION VARCHAR2(200)
);

-- Tablas de planificación académica
CREATE TABLE PLAN_ESTUDIO (
    ID_PLAN NUMBER PRIMARY KEY,
    ID_CURSO NUMBER NOT NULL,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    FECHA_CREACION DATE DEFAULT SYSDATE,
    ID_ESTADO NUMBER
);

CREATE TABLE UNIDAD (
    ID_UNIDAD NUMBER PRIMARY KEY,
    ID_PLAN NUMBER NOT NULL,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    ORDEN NUMBER(2)
);

CREATE TABLE CONTENIDO (
    ID_CONTENIDO NUMBER PRIMARY KEY,
    ID_UNIDAD NUMBER NOT NULL,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    ORDEN NUMBER(2)
);

CREATE TABLE TEMA (
    ID_TEMA NUMBER PRIMARY KEY,
    ID_CURSO NUMBER NOT NULL,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    ORDEN NUMBER(2),
    ID_CONTENIDO NUMBER
);

-- Tablas de grupos y matrículas
CREATE TABLE GRUPO (
    ID_GRUPO NUMBER PRIMARY KEY,
    ID_CURSO NUMBER NOT NULL,
    ID_DOCENTE NUMBER NOT NULL,
    PERIODO VARCHAR2(20) NOT NULL,
    ANIO NUMBER(4) NOT NULL,
    CAPACIDAD NUMBER(3),
    ID_ESTADO NUMBER,
    ID_PERIODO NUMBER
);

CREATE TABLE JORNADA (
    ID_JORNADA NUMBER PRIMARY KEY,
    ID_GRUPO NUMBER NOT NULL,
    ID_AULA NUMBER NOT NULL,
    DIA_SEMANA VARCHAR2(20) NOT NULL,
    HORA_INICIO TIMESTAMP NOT NULL,
    HORA_FIN TIMESTAMP NOT NULL
);

CREATE TABLE MATRICULA (
    ID_MATRICULA NUMBER PRIMARY KEY,
    ID_ESTUDIANTE NUMBER NOT NULL,
    ID_GRUPO NUMBER NOT NULL,
    FECHA_MATRICULA DATE DEFAULT SYSDATE,
    ID_ESTADO NUMBER NOT NULL
);

-- Tablas relacionadas con exámenes
CREATE TABLE PREGUNTA (
    ID_PREGUNTA NUMBER PRIMARY KEY,
    ID_DOCENTE NUMBER NOT NULL,
    ID_TEMA NUMBER NOT NULL,
    ID_NIVEL_DIFICULTAD NUMBER NOT NULL,
    ID_TIPO_PREGUNTA NUMBER NOT NULL,
    TEXTO_PREGUNTA VARCHAR2(1000) NOT NULL,
    ES_PUBLICA NUMBER(1) DEFAULT 0,
    TIEMPO_MAXIMO NUMBER(4),
    PORCENTAJE NUMBER(5,2),
    ID_PREGUNTA_PADRE NUMBER,
    ID_ESTADO NUMBER NOT NULL
);

CREATE TABLE OPCION_RESPUESTA (
    ID_OPCION NUMBER PRIMARY KEY,
    ID_PREGUNTA NUMBER NOT NULL,
    TEXTO_OPCION VARCHAR2(500) NOT NULL,
    ES_CORRECTA NUMBER(1) DEFAULT 0,
    ORDEN NUMBER(2)
);

CREATE TABLE EXAMEN (
    ID_EXAMEN NUMBER PRIMARY KEY,
    ID_DOCENTE NUMBER NOT NULL,
    ID_TEMA NUMBER NOT NULL,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(500),
    FECHA_CREACION DATE DEFAULT SYSDATE,
    FECHA_INICIO TIMESTAMP,
    FECHA_FIN TIMESTAMP,
    TIEMPO_LIMITE NUMBER(4),
    PESO_CURSO NUMBER(5,2),
    UMBRAL_APROBACION NUMBER(5,2),
    CANTIDAD_PREGUNTAS_TOTAL NUMBER(3),
    CANTIDAD_PREGUNTAS_PRESENTAR NUMBER(3),
    ID_ESTADO NUMBER NOT NULL,
    ID_CATEGORIA NUMBER,
    INTENTOS_PERMITIDOS NUMBER(2) DEFAULT 1,
    MOSTRAR_RESULTADOS NUMBER(1) DEFAULT 1,
    PERMITIR_RETROALIMENTACION NUMBER(1) DEFAULT 1,
    FECHA_ULTIMA_MODIFICACION TIMESTAMP,
    ID_USUARIO_ULTIMA_MODIFICACION NUMBER
);

CREATE TABLE EXAMEN_PREGUNTA (
    ID_EXAMEN_PREGUNTA NUMBER PRIMARY KEY,
    ID_EXAMEN NUMBER NOT NULL,
    ID_PREGUNTA NUMBER NOT NULL,
    PORCENTAJE NUMBER(5,2) NOT NULL,
    ORDEN NUMBER(3)
);

CREATE TABLE PRESENTACION_EXAMEN (
    ID_PRESENTACION NUMBER PRIMARY KEY,
    ID_EXAMEN NUMBER NOT NULL,
    ID_ESTUDIANTE NUMBER NOT NULL,
    FECHA_INICIO TIMESTAMP DEFAULT SYSTIMESTAMP,
    FECHA_FIN TIMESTAMP,
    PUNTAJE_OBTENIDO NUMBER(5,2),
    TIEMPO_UTILIZADO NUMBER(4),
    IP_ACCESO VARCHAR2(15),
    ID_ESTADO NUMBER NOT NULL
);

CREATE TABLE RESPUESTA_ESTUDIANTE (
    ID_RESPUESTA NUMBER PRIMARY KEY,
    ID_PRESENTACION NUMBER NOT NULL,
    ID_PREGUNTA NUMBER NOT NULL,
    RESPUESTA_DADA VARCHAR2(1000),
    ES_CORRECTA NUMBER(1),
    PUNTAJE_OBTENIDO NUMBER(5,2),
    TIEMPO_UTILIZADO NUMBER(4)
);

-- Tablas adicionales
CREATE TABLE AUDITORIA (
    ID_AUDITORIA NUMBER PRIMARY KEY,
    ID_USUARIO NUMBER,
    TABLA_AFECTADA VARCHAR2(50) NOT NULL,
    ID_REGISTRO NUMBER NOT NULL,
    TIPO_OPERACION VARCHAR2(20) NOT NULL,
    FECHA_OPERACION TIMESTAMP DEFAULT SYSTIMESTAMP,
    DATOS_ANTERIORES CLOB,
    DATOS_NUEVOS CLOB,
    IP_ACCESO VARCHAR2(15)
);

CREATE TABLE NOTIFICACION (
    ID_NOTIFICACION NUMBER PRIMARY KEY,
    ID_USUARIO NUMBER NOT NULL,
    TITULO VARCHAR2(100) NOT NULL,
    MENSAJE VARCHAR2(1000) NOT NULL,
    TIPO_NOTIFICACION VARCHAR2(50) NOT NULL,
    FECHA_CREACION TIMESTAMP DEFAULT SYSTIMESTAMP,
    FECHA_LECTURA TIMESTAMP,
    ID_ESTADO NUMBER NOT NULL
);


-- Llaves foráneas para FACULTAD
ALTER TABLE FACULTAD ADD CONSTRAINT FK_FACULTAD_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para PROGRAMA
ALTER TABLE PROGRAMA ADD CONSTRAINT FK_PROGRAMA_FACULTAD 
FOREIGN KEY (ID_FACULTAD) REFERENCES FACULTAD(ID_FACULTAD);
ALTER TABLE PROGRAMA ADD CONSTRAINT FK_PROGRAMA_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para CURSO
ALTER TABLE CURSO ADD CONSTRAINT FK_CURSO_PROGRAMA 
FOREIGN KEY (ID_PROGRAMA) REFERENCES PROGRAMA(ID_PROGRAMA);
ALTER TABLE CURSO ADD CONSTRAINT FK_CURSO_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para PERIODO_ACADEMICO
ALTER TABLE PERIODO_ACADEMICO ADD CONSTRAINT FK_PERIODO_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para AULA
ALTER TABLE AULA ADD CONSTRAINT FK_AULA_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para USUARIO
ALTER TABLE USUARIO ADD CONSTRAINT FK_USUARIO_TIPO 
FOREIGN KEY (ID_TIPO_USUARIO) REFERENCES TIPO_USUARIO(ID_TIPO_USUARIO);
ALTER TABLE USUARIO ADD CONSTRAINT FK_USUARIO_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para PLAN_ESTUDIO
ALTER TABLE PLAN_ESTUDIO ADD CONSTRAINT FK_PLAN_CURSO 
FOREIGN KEY (ID_CURSO) REFERENCES CURSO(ID_CURSO);
ALTER TABLE PLAN_ESTUDIO ADD CONSTRAINT FK_PLAN_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para UNIDAD
ALTER TABLE UNIDAD ADD CONSTRAINT FK_UNIDAD_PLAN 
FOREIGN KEY (ID_PLAN) REFERENCES PLAN_ESTUDIO(ID_PLAN);

-- Llaves foráneas para CONTENIDO
ALTER TABLE CONTENIDO ADD CONSTRAINT FK_CONTENIDO_UNIDAD 
FOREIGN KEY (ID_UNIDAD) REFERENCES UNIDAD(ID_UNIDAD);

-- Llaves foráneas para TEMA
ALTER TABLE TEMA ADD CONSTRAINT FK_TEMA_CURSO 
FOREIGN KEY (ID_CURSO) REFERENCES CURSO(ID_CURSO);
ALTER TABLE TEMA ADD CONSTRAINT FK_TEMA_CONTENIDO 
FOREIGN KEY (ID_CONTENIDO) REFERENCES CONTENIDO(ID_CONTENIDO);

-- Llaves foráneas para GRUPO
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_CURSO 
FOREIGN KEY (ID_CURSO) REFERENCES CURSO(ID_CURSO);
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_DOCENTE 
FOREIGN KEY (ID_DOCENTE) REFERENCES USUARIO(ID_USUARIO);
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_PERIODO 
FOREIGN KEY (ID_PERIODO) REFERENCES PERIODO_ACADEMICO(ID_PERIODO);

-- Llaves foráneas para JORNADA
ALTER TABLE JORNADA ADD CONSTRAINT FK_JORNADA_GRUPO 
FOREIGN KEY (ID_GRUPO) REFERENCES GRUPO(ID_GRUPO);
ALTER TABLE JORNADA ADD CONSTRAINT FK_JORNADA_AULA 
FOREIGN KEY (ID_AULA) REFERENCES AULA(ID_AULA);

-- Llaves foráneas para MATRICULA
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_ESTUDIANTE 
FOREIGN KEY (ID_ESTUDIANTE) REFERENCES USUARIO(ID_USUARIO);
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_GRUPO 
FOREIGN KEY (ID_GRUPO) REFERENCES GRUPO(ID_GRUPO);
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para PREGUNTA
ALTER TABLE PREGUNTA ADD CONSTRAINT FK_PREGUNTA_DOCENTE 
FOREIGN KEY (ID_DOCENTE) REFERENCES USUARIO(ID_USUARIO);
ALTER TABLE PREGUNTA ADD CONSTRAINT FK_PREGUNTA_TEMA 
FOREIGN KEY (ID_TEMA) REFERENCES TEMA(ID_TEMA);
ALTER TABLE PREGUNTA ADD CONSTRAINT FK_PREGUNTA_NIVEL 
FOREIGN KEY (ID_NIVEL_DIFICULTAD) REFERENCES NIVEL_DIFICULTAD(ID_NIVEL_DIFICULTAD);
ALTER TABLE PREGUNTA ADD CONSTRAINT FK_PREGUNTA_TIPO 
FOREIGN KEY (ID_TIPO_PREGUNTA) REFERENCES TIPO_PREGUNTA(ID_TIPO_PREGUNTA);
ALTER TABLE PREGUNTA ADD CONSTRAINT FK_PREGUNTA_PADRE 
FOREIGN KEY (ID_PREGUNTA_PADRE) REFERENCES PREGUNTA(ID_PREGUNTA);
ALTER TABLE PREGUNTA ADD CONSTRAINT FK_PREGUNTA_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para OPCION_RESPUESTA
ALTER TABLE OPCION_RESPUESTA ADD CONSTRAINT FK_OPCION_PREGUNTA 
FOREIGN KEY (ID_PREGUNTA) REFERENCES PREGUNTA(ID_PREGUNTA);

-- Llaves foráneas para EXAMEN
ALTER TABLE EXAMEN ADD CONSTRAINT FK_EXAMEN_DOCENTE 
FOREIGN KEY (ID_DOCENTE) REFERENCES USUARIO(ID_USUARIO);
ALTER TABLE EXAMEN ADD CONSTRAINT FK_EXAMEN_TEMA 
FOREIGN KEY (ID_TEMA) REFERENCES TEMA(ID_TEMA);
ALTER TABLE EXAMEN ADD CONSTRAINT FK_EXAMEN_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);
ALTER TABLE EXAMEN ADD CONSTRAINT FK_EXAMEN_CATEGORIA 
FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA_EXAMEN(ID_CATEGORIA);
ALTER TABLE EXAMEN ADD CONSTRAINT FK_EXAMEN_USUARIO_MOD 
FOREIGN KEY (ID_USUARIO_ULTIMA_MODIFICACION) REFERENCES USUARIO(ID_USUARIO);

-- Llaves foráneas para EXAMEN_PREGUNTA
ALTER TABLE EXAMEN_PREGUNTA ADD CONSTRAINT FK_EXAMENP_EXAMEN 
FOREIGN KEY (ID_EXAMEN) REFERENCES EXAMEN(ID_EXAMEN);
ALTER TABLE EXAMEN_PREGUNTA ADD CONSTRAINT FK_EXAMENP_PREGUNTA 
FOREIGN KEY (ID_PREGUNTA) REFERENCES PREGUNTA(ID_PREGUNTA);

-- Llaves foráneas para PRESENTACION_EXAMEN
ALTER TABLE PRESENTACION_EXAMEN ADD CONSTRAINT FK_PRESENTACION_EXAMEN 
FOREIGN KEY (ID_EXAMEN) REFERENCES EXAMEN(ID_EXAMEN);
ALTER TABLE PRESENTACION_EXAMEN ADD CONSTRAINT FK_PRESENTACION_ESTUDIANTE 
FOREIGN KEY (ID_ESTUDIANTE) REFERENCES USUARIO(ID_USUARIO);
ALTER TABLE PRESENTACION_EXAMEN ADD CONSTRAINT FK_PRESENTACION_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);

-- Llaves foráneas para RESPUESTA_ESTUDIANTE
ALTER TABLE RESPUESTA_ESTUDIANTE ADD CONSTRAINT FK_RESPUESTA_PRESENTACION 
FOREIGN KEY (ID_PRESENTACION) REFERENCES PRESENTACION_EXAMEN(ID_PRESENTACION);
ALTER TABLE RESPUESTA_ESTUDIANTE ADD CONSTRAINT FK_RESPUESTA_PREGUNTA 
FOREIGN KEY (ID_PREGUNTA) REFERENCES PREGUNTA(ID_PREGUNTA);

-- Llaves foráneas para AUDITORIA
ALTER TABLE AUDITORIA ADD CONSTRAINT FK_AUDITORIA_USUARIO 
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO);

-- Llaves foráneas para NOTIFICACION
ALTER TABLE NOTIFICACION ADD CONSTRAINT FK_NOTIFICACION_USUARIO 
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO);
ALTER TABLE NOTIFICACION ADD CONSTRAINT FK_NOTIFICACION_ESTADO 
FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO_GENERAL(ID_ESTADO);


-- 1. Catálogos y configuración
INSERT INTO ESTADO_GENERAL VALUES (1, 'Activo', 'Registro activo', 'GENERAL', 1);
INSERT INTO ESTADO_GENERAL VALUES (2, 'Inactivo', 'Registro inactivo', 'GENERAL', 1);

INSERT INTO TIPO_USUARIO VALUES (1, 'Estudiante', 'Usuario estudiante', 1);
INSERT INTO TIPO_USUARIO VALUES (2, 'Docente', 'Usuario docente', 1);

INSERT INTO TIPO_PREGUNTA VALUES (1, 'Selección única', 'Una sola respuesta correcta', 1);
INSERT INTO TIPO_PREGUNTA VALUES (2, 'Selección múltiple', 'Varias respuestas correctas', 1);
INSERT INTO TIPO_PREGUNTA VALUES (3, 'Falso/Verdadero', 'Respuesta de verdadero o falso', 1);

INSERT INTO NIVEL_DIFICULTAD VALUES (1, 'Fácil', 'Pregunta sencilla', 1);
INSERT INTO NIVEL_DIFICULTAD VALUES (2, 'Media', 'Pregunta de dificultad media', 1);
INSERT INTO NIVEL_DIFICULTAD VALUES (3, 'Difícil', 'Pregunta compleja', 1);

INSERT INTO CATEGORIA_EXAMEN VALUES (1, 'Parcial', 'Examen parcial', 1);
INSERT INTO CATEGORIA_EXAMEN VALUES (2, 'Final', 'Examen final', 1);

-- 2. Estructura académica
INSERT INTO FACULTAD VALUES (1, 'Ingeniería', 'Facultad de Ingeniería', 1);
INSERT INTO PROGRAMA VALUES (1, 1, 'Sistemas', 'Ingeniería de Sistemas', 1);
INSERT INTO CURSO VALUES (1, 'Bases de Datos II', 'Curso avanzado de bases de datos', 4, 1, 1);

INSERT INTO PERIODO_ACADEMICO VALUES (1, '2025-1', TO_DATE('2025-01-15','YYYY-MM-DD'), TO_DATE('2025-06-15','YYYY-MM-DD'), 1);
INSERT INTO AULA VALUES (1, 'Aula 101', 'Bloque A', 40, 1);

-- 3. Usuarios (3 docentes y 7 estudiantes)
INSERT INTO USUARIO VALUES (1, 2, 'Juan', 'Pérez', 'juan.perez@uni.edu', 'JuanP3rez#2024', 1, SYSDATE, NULL, 0, NULL, '3001112233', 'Calle 1');
INSERT INTO USUARIO VALUES (2, 2, 'María', 'López', 'maria.lopez@uni.edu', 'MariaL0pez*2024', 1, SYSDATE, NULL, 0, NULL, '3002223344', 'Calle 2');
INSERT INTO USUARIO VALUES (3, 2, 'Carlos', 'Ramírez', 'carlos.ramirez@uni.edu', 'CarlosR@2024', 1, SYSDATE, NULL, 0, NULL, '3003334455', 'Calle 3');
INSERT INTO USUARIO VALUES (4, 1, 'Ana', 'Gómez', 'ana.gomez@uni.edu', 'AnaGomez_2024', 1, SYSDATE, NULL, 0, NULL, '3011112233', 'Calle 4');
INSERT INTO USUARIO VALUES (5, 1, 'Luis', 'Martínez', 'luis.martinez@uni.edu', 'LuisM2024!', 1, SYSDATE, NULL, 0, NULL, '3012223344', 'Calle 5');
INSERT INTO USUARIO VALUES (6, 1, 'Sofía', 'Torres', 'sofia.torres@uni.edu', 'SofiaT#2024', 1, SYSDATE, NULL, 0, NULL, '3013334455', 'Calle 6');
INSERT INTO USUARIO VALUES (7, 1, 'Pedro', 'Suárez', 'pedro.suarez@uni.edu', 'PedroS_2024', 1, SYSDATE, NULL, 0, NULL, '3014445566', 'Calle 7');
INSERT INTO USUARIO VALUES (8, 1, 'Lucía', 'Vargas', 'lucia.vargas@uni.edu', 'LuciaV2024*', 1, SYSDATE, NULL, 0, NULL, '3015556677', 'Calle 8');
INSERT INTO USUARIO VALUES (9, 1, 'Miguel', 'Castro', 'miguel.castro@uni.edu', 'MiguelC@2024', 1, SYSDATE, NULL, 0, NULL, '3016667788', 'Calle 9');
INSERT INTO USUARIO VALUES (10, 1, 'Elena', 'Morales', 'elena.morales@uni.edu', 'ElenaM2024!', 1, SYSDATE, NULL, 0, NULL, '3017778899', 'Calle 10');

-- 4. Planificación académica
INSERT INTO PLAN_ESTUDIO VALUES (1, 1, 'Plan 2025', 'Plan de estudios 2025', SYSDATE, 1);
INSERT INTO UNIDAD VALUES (1, 1, 'Unidad 1', 'Introducción a bases de datos', 1);
INSERT INTO CONTENIDO VALUES (1, 1, 'Modelo Relacional', 'Conceptos básicos', 1);
INSERT INTO TEMA VALUES (1, 1, 'Modelo Relacional', 'Definición y características', 1, 1);

-- 5. Grupos y matrículas
INSERT INTO GRUPO VALUES (1, 1, 1, '2025-1', 2025, 40, 1, 1);
INSERT INTO JORNADA VALUES (1, 1, 1, 'Lunes', TO_TIMESTAMP('08:00:00', 'HH24:MI:SS'), TO_TIMESTAMP('10:00:00', 'HH24:MI:SS'));

-- Matrícula de 7 estudiantes al grupo
INSERT INTO MATRICULA VALUES (1, 4, 1, SYSDATE, 1);
INSERT INTO MATRICULA VALUES (2, 5, 1, SYSDATE, 1);
INSERT INTO MATRICULA VALUES (3, 6, 1, SYSDATE, 1);
INSERT INTO MATRICULA VALUES (4, 7, 1, SYSDATE, 1);
INSERT INTO MATRICULA VALUES (5, 8, 1, SYSDATE, 1);
INSERT INTO MATRICULA VALUES (6, 9, 1, SYSDATE, 1);
INSERT INTO MATRICULA VALUES (7, 10, 1, SYSDATE, 1);

-- 6. Preguntas y opciones
INSERT INTO PREGUNTA VALUES (1, 1, 1, 1, 1, '¿Qué es una clave primaria?', 1, NULL, 100, NULL, 1);
INSERT INTO PREGUNTA VALUES (2, 2, 1, 2, 2, '¿Cuáles son características del modelo relacional?', 1, NULL, 100, NULL, 1);
INSERT INTO PREGUNTA VALUES (3, 3, 1, 1, 3, 'El modelo relacional fue propuesto por E.F. Codd. (V/F)', 1, NULL, 100, NULL, 1);

-- Opciones para pregunta 1 (Selección única)
INSERT INTO OPCION_RESPUESTA VALUES (1, 1, 'Identificador único', 1, 1);
INSERT INTO OPCION_RESPUESTA VALUES (2, 1, 'Dato repetido', 0, 2);
INSERT INTO OPCION_RESPUESTA VALUES (3, 1, 'Campo opcional', 0, 3);

-- Opciones para pregunta 2 (Selección múltiple)
INSERT INTO OPCION_RESPUESTA VALUES (4, 2, 'Integridad de datos', 1, 1);
INSERT INTO OPCION_RESPUESTA VALUES (5, 2, 'Redundancia máxima', 0, 2);
INSERT INTO OPCION_RESPUESTA VALUES (6, 2, 'Uso de tablas', 1, 3);
INSERT INTO OPCION_RESPUESTA VALUES (7, 2, 'Relaciones entre tablas', 1, 4);

-- Opciones para pregunta 3 (Verdadero/Falso)
INSERT INTO OPCION_RESPUESTA VALUES (8, 3, 'Verdadero', 1, 1);
INSERT INTO OPCION_RESPUESTA VALUES (9, 3, 'Falso', 0, 2);

-- 7. Exámenes y asignación de preguntas
INSERT INTO EXAMEN VALUES (1, 1, 1, 'Quiz 1', 'Primer quiz del curso', SYSDATE, TO_TIMESTAMP('2025-02-01 08:00:00', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2025-02-01 09:00:00', 'YYYY-MM-DD HH24:MI:SS'), 60, 20, 60, 3, 3, 1, 1, 1, 1, 1, SYSDATE, 1);

INSERT INTO EXAMEN_PREGUNTA VALUES (1, 1, 1, 33.33, 1);
INSERT INTO EXAMEN_PREGUNTA VALUES (2, 1, 2, 33.33, 2);
INSERT INTO EXAMEN_PREGUNTA VALUES (3, 1, 3, 33.34, 3);

-- 8. Presentaciones y respuestas de estudiantes (solo para 3 estudiantes como ejemplo)
INSERT INTO PRESENTACION_EXAMEN VALUES (1, 1, 4, SYSTIMESTAMP, SYSTIMESTAMP, 90, 45, '192.168.1.10', 1);
INSERT INTO PRESENTACION_EXAMEN VALUES (2, 1, 5, SYSTIMESTAMP, SYSTIMESTAMP, 80, 50, '192.168.1.11', 1);
INSERT INTO PRESENTACION_EXAMEN VALUES (3, 1, 6, SYSTIMESTAMP, SYSTIMESTAMP, 70, 55, '192.168.1.12', 1);

-- Respuestas de estudiantes
INSERT INTO RESPUESTA_ESTUDIANTE VALUES (1, 1, 1, 'Identificador único', 1, 33.33, 10);
INSERT INTO RESPUESTA_ESTUDIANTE VALUES (2, 1, 2, 'Integridad de datos;Uso de tablas;Relaciones entre tablas', 1, 33.33, 15);
INSERT INTO RESPUESTA_ESTUDIANTE VALUES (3, 1, 3, 'Verdadero', 1, 33.34, 20);

INSERT INTO RESPUESTA_ESTUDIANTE VALUES (4, 2, 1, 'Dato repetido', 0, 0, 12);
INSERT INTO RESPUESTA_ESTUDIANTE VALUES (5, 2, 2, 'Integridad de datos;Uso de tablas', 1, 33.33, 18);
INSERT INTO RESPUESTA_ESTUDIANTE VALUES (6, 2, 3, 'Verdadero', 1, 33.34, 20);

INSERT INTO RESPUESTA_ESTUDIANTE VALUES (7, 3, 1, 'Identificador único', 1, 33.33, 11);
INSERT INTO RESPUESTA_ESTUDIANTE VALUES (8, 3, 2, 'Redundancia máxima', 0, 0, 19);
INSERT INTO RESPUESTA_ESTUDIANTE VALUES (9, 3, 3, 'Falso', 0, 0, 25);

-- 9. Notificaciones y auditoría
INSERT INTO NOTIFICACION VALUES (1, 4, 'Examen disponible', 'Ya puedes presentar el Quiz 1', 'Examen', SYSTIMESTAMP, NULL, 1);
INSERT INTO NOTIFICACION VALUES (2, 5, 'Examen disponible', 'Ya puedes presentar el Quiz 1', 'Examen', SYSTIMESTAMP, NULL, 1);

INSERT INTO AUDITORIA VALUES (1, 1, 'EXAMEN', 1, 'INSERT', SYSTIMESTAMP, NULL, NULL, '192.168.1.1');

COMMIT;